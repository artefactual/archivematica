from prometheus_client import Summary

# We need to balance reasonably accurate tracking with high cardinality here, as
# this is used with script_name labels and there are already over 100 scripts.
TASK_DURATION_BUCKETS = (
    2.5,
    5.0,
    7.5,
    10.0,
    15.0,
    20.0,
    25.0,
    30.0,
    35.0,
    40.0,
    45.0,
    50.0,
    55.0,
    60.0,
    70.0,
    80.0,
    90.0,
    105.0,
    120.0,
    180.0,
    240.0,
    300.0,
    360.0,
    420.0,
    480.0,
    540.0,
    600.0,
    750.0,
    900.0,
    1050.0,
    1200.0,
    1500.0,
    1800.0,
    2700.0,
    3600.0,
    float("inf"),
)
# Histogram buckets for total processing time, e.g. for an AIP.
# Not used with labels.
PROCESSING_TIME_BUCKETS = (
    15.0,
    17.5,
    20.0,
    22.5,
    25.0,
    30.0,
    32.5,
    35.0,
    37.5,
    40.0,
    42.5,
    45.0,
    47.5,
    50.0,
    52.5,
    55.0,
    57.5,
    60.0,
    65.0,
    70.0,
    75.0,
    80.0,
    85.0,
    90.0,
    95.0,
    100.0,
    105.0,
    110.0,
    115.0,
    120.0,
    130.0,
    140.0,
    150.0,
    160.0,
    170.0,
    180.0,
    190.0,
    200.0,
    210.0,
    220.0,
    230.0,
    240.0,
    250.0,
    260.0,
    270.0,
    280.0,
    290.0,
    300.0,
    330.0,
    360.0,
    390.0,
    420.0,
    450.0,
    480.0,
    510.0,
    540.0,
    570.0,
    600.0,
    660.0,
    720.0,
    780.0,
    840.0,
    900.0,
    1050.0,
    1200.0,
    1350.0,
    1500.0,
    1650.0,
    1800.0,
    2100.0,
    2400.0,
    2700.0,
    3000.0,
    3300.0,
    3600.0,
    4200.0,
    4800.0,
    5400.0,
    6000.0,
    6600.0,
    7200.0,
    9000.0,
    10800.0,
    12600.0,
    14400.0,
    18000.0,
    21600.0,
    25200.0,
    float("inf"),
)


db_retry_time_summary = Summary(
    "common_db_retry_time_seconds",
    "Time waiting to retry database transactions in seconds",
    ["description"],
)
ss_api_time_summary = Summary(
    "common_ss_api_request_duration_seconds",
    "Time waiting on the Storage Service API in seconds",
    ["function"],
)
